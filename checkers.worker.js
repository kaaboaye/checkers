!function(e){self.webpackChunk=function(t,r){for(var o in r)e[o]=r[o];for(;t.length;)n[t.pop()]=1};var t={},n={0:1},r={};var o={5:function(){return{"./index_bg.js":{__wbindgen_json_parse:function(e,n){return t[4].exports.c(e,n)},__wbg_log_c703a4c71dac371b:function(e,n){return t[4].exports.b(e,n)}}}}};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(e){var t=[];return t.push(Promise.resolve().then((function(){n[e]||importScripts(a.p+""+({}[e]||e)+".worker.js")}))),({1:[5]}[e]||[]).forEach((function(e){var n=r[e];if(n)t.push(n);else{var i,s=o[e](),u=fetch(a.p+""+{5:"52ff24f3389315c7f182"}[e]+".module.wasm");if(s instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)i=Promise.all([WebAssembly.compileStreaming(u),s]).then((function(e){return WebAssembly.instantiate(e[0],e[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)i=WebAssembly.instantiateStreaming(u,s);else{i=u.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,s)}))}t.push(r[e]=i.then((function(t){return a.w[e]=(t.instance||t).exports})))}})),Promise.all(t)},a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.w={},a(a.s=1)}([,function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2);r(n(3)).default.then((function(e){o.expose(e)}))},function(e,t,n){"use strict";n.r(t),n.d(t,"createEndpoint",(function(){return o})),n.d(t,"expose",(function(){return c})),n.d(t,"proxy",(function(){return y})),n.d(t,"proxyMarker",(function(){return r})),n.d(t,"releaseProxy",(function(){return a})),n.d(t,"transfer",(function(){return b})),n.d(t,"transferHandlers",(function(){return u})),n.d(t,"windowEndpoint",(function(){return h})),n.d(t,"wrap",(function(){return l}));const r=Symbol("Comlink.proxy"),o=Symbol("Comlink.endpoint"),a=Symbol("Comlink.releaseProxy"),i=Symbol("Comlink.thrown"),s=e=>"object"==typeof e&&null!==e||"function"==typeof e,u=new Map([["proxy",{canHandle:e=>s(e)&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return c(e,t),[n,[n]]},deserialize:e=>(e.start(),l(e))}],["throw",{canHandle:e=>s(e)&&i in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function c(e,t=self){t.addEventListener("message",(function n(r){if(!r||!r.data)return;const{id:o,type:a,path:s}=Object.assign({path:[]},r.data),u=(r.data.argumentList||[]).map(v);let l;try{const t=s.slice(0,-1).reduce((e,t)=>e[t],e),n=s.reduce((e,t)=>e[t],e);switch(a){case 0:l=n;break;case 1:t[s.slice(-1)[0]]=v(r.data.value),l=!0;break;case 2:l=n.apply(t,u);break;case 3:l=y(new n(...u));break;case 4:{const{port1:t,port2:n}=new MessageChannel;c(e,n),l=b(t,[t])}break;case 5:l=void 0}}catch(e){l={value:e,[i]:0}}Promise.resolve(l).catch(e=>({value:e,[i]:0})).then(e=>{const[r,i]=g(e);t.postMessage(Object.assign(Object.assign({},r),{id:o}),i),5===a&&(t.removeEventListener("message",n),f(t))})})),t.start&&t.start()}function f(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function l(e,t){return function e(t,n=[],r=function(){}){let i=!1;const s=new Proxy(r,{get(r,o){if(p(i),o===a)return()=>w(t,{type:5,path:n.map(e=>e.toString())}).then(()=>{f(t),i=!0});if("then"===o){if(0===n.length)return{then:()=>s};const e=w(t,{type:0,path:n.map(e=>e.toString())}).then(v);return e.then.bind(e)}return e(t,[...n,o])},set(e,r,o){p(i);const[a,s]=g(o);return w(t,{type:1,path:[...n,r].map(e=>e.toString()),value:a},s).then(v)},apply(r,a,s){p(i);const u=n[n.length-1];if(u===o)return w(t,{type:4}).then(v);if("bind"===u)return e(t,n.slice(0,-1));const[c,f]=d(s);return w(t,{type:2,path:n.map(e=>e.toString()),argumentList:c},f).then(v)},construct(e,r){p(i);const[o,a]=d(r);return w(t,{type:3,path:n.map(e=>e.toString()),argumentList:o},a).then(v)}});return s}(e,[],t)}function p(e){if(e)throw new Error("Proxy has been released and is not useable")}function d(e){const t=e.map(g);return[t.map(e=>e[0]),(n=t.map(e=>e[1]),Array.prototype.concat.apply([],n))];var n}const m=new WeakMap;function b(e,t){return m.set(e,t),e}function y(e){return Object.assign(e,{[r]:!0})}function h(e,t=self,n="*"){return{postMessage:(t,r)=>e.postMessage(t,n,r),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function g(e){for(const[t,n]of u)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:3,name:t,value:r},o]}return[{type:0,value:e},m.get(e)||[]]}function v(e){switch(e.type){case 3:return u.get(e.name).deserialize(e.value);case 0:return e.value}}function w(e,t,n){return new Promise(r=>{const o=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===o&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Promise((function(e){n.e(1).then(function(t){e(n(0))}.bind(null,n)).catch(n.oe)}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoZWNrZXJzL3dvcmtlci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29tbGluay9kaXN0L2VzbS9jb21saW5rLm1qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcnVzdC50cyJdLCJuYW1lcyI6WyJzZWxmIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsIm1vZHVsZUlkIiwibW9kdWxlcyIsImxlbmd0aCIsImluc3RhbGxlZENodW5rcyIsInBvcCIsImluc3RhbGxlZE1vZHVsZXMiLCIwIiwiaW5zdGFsbGVkV2FzbU1vZHVsZXMiLCJ3YXNtSW1wb3J0T2JqZWN0cyIsIjUiLCJwMGkzMiIsInAxaTMyIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJlIiwiY2h1bmtJZCIsInByb21pc2VzIiwicHVzaCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsImltcG9ydFNjcmlwdHMiLCJwIiwiZm9yRWFjaCIsIndhc21Nb2R1bGVJZCIsImluc3RhbGxlZFdhc21Nb2R1bGVEYXRhIiwicHJvbWlzZSIsImltcG9ydE9iamVjdCIsInJlcSIsImZldGNoIiwiV2ViQXNzZW1ibHkiLCJjb21waWxlU3RyZWFtaW5nIiwiYWxsIiwiaXRlbXMiLCJpbnN0YW50aWF0ZSIsImluc3RhbnRpYXRlU3RyZWFtaW5nIiwieCIsImFycmF5QnVmZmVyIiwiYnl0ZXMiLCJyZXMiLCJ3IiwiaW5zdGFuY2UiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJzIiwiX19pbXBvcnREZWZhdWx0IiwidGhpcyIsIm1vZCIsImNvbWxpbmtfMSIsImRlZmF1bHQiLCJydXN0IiwiZXhwb3NlIiwicHJveHlNYXJrZXIiLCJjcmVhdGVFbmRwb2ludCIsInJlbGVhc2VQcm94eSIsInRocm93TWFya2VyIiwiaXNPYmplY3QiLCJ2YWwiLCJ0cmFuc2ZlckhhbmRsZXJzIiwiTWFwIiwiY2FuSGFuZGxlIiwib2JqIiwicG9ydDEiLCJwb3J0MiIsIk1lc3NhZ2VDaGFubmVsIiwiZGVzZXJpYWxpemUiLCJwb3J0Iiwic3RhcnQiLCJ3cmFwIiwic2VyaWFsaXplZCIsIkVycm9yIiwiaXNFcnJvciIsIm1lc3NhZ2UiLCJzdGFjayIsImFzc2lnbiIsImVwIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhbGxiYWNrIiwiZXYiLCJkYXRhIiwiaWQiLCJ0eXBlIiwicGF0aCIsImFyZ3VtZW50TGlzdCIsIm1hcCIsImZyb21XaXJlVmFsdWUiLCJyZXR1cm5WYWx1ZSIsInBhcmVudCIsInNsaWNlIiwicmVkdWNlIiwicHJvcCIsInJhd1ZhbHVlIiwiYXBwbHkiLCJwcm94eSIsInRyYW5zZmVyIiwidW5kZWZpbmVkIiwiY2F0Y2giLCJ3aXJlVmFsdWUiLCJ0cmFuc2ZlcmFibGVzIiwidG9XaXJlVmFsdWUiLCJwb3N0TWVzc2FnZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZUVuZFBvaW50IiwiZW5kcG9pbnQiLCJjb25zdHJ1Y3RvciIsImlzTWVzc2FnZVBvcnQiLCJjbG9zZSIsInRhcmdldCIsImNyZWF0ZVByb3h5IiwiaXNQcm94eVJlbGVhc2VkIiwiUHJveHkiLCJfdGFyZ2V0IiwidGhyb3dJZlByb3h5UmVsZWFzZWQiLCJyZXF1ZXN0UmVzcG9uc2VNZXNzYWdlIiwidG9TdHJpbmciLCJfdGhpc0FyZyIsInJhd0FyZ3VtZW50TGlzdCIsImxhc3QiLCJwcm9jZXNzQXJndW1lbnRzIiwiaXNSZWxlYXNlZCIsInByb2Nlc3NlZCIsInYiLCJhcnIiLCJBcnJheSIsImNvbmNhdCIsInRyYW5zZmVyQ2FjaGUiLCJXZWFrTWFwIiwidHJhbnNmZXJzIiwic2V0Iiwid2luZG93RW5kcG9pbnQiLCJjb250ZXh0IiwidGFyZ2V0T3JpZ2luIiwibXNnIiwiaGFuZGxlciIsInNlcmlhbGl6ZWRWYWx1ZSIsInNlcmlhbGl6ZSIsImZpbGwiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJOdW1iZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiam9pbiIsInJlcXVpcmUiXSwibWFwcGluZ3MiOiJhQUFFQSxLQUFtQixhQUFJLFNBQThCQyxFQUFVQyxHQUM5RCxJQUFJLElBQUlDLEtBQVlELEVBQ25CRSxFQUFRRCxHQUFZRCxFQUFZQyxHQUVqQyxLQUFNRixFQUFTSSxRQUNkQyxFQUFnQkwsRUFBU00sT0FBUyxHQUlwQyxJQUFJQyxFQUFtQixHQUluQkYsRUFBa0IsQ0FDckJHLEVBQUcsR0FJQUMsRUFBdUIsR0FJM0IsSUFBSUMsRUFBb0IsQ0FDdkJDLEVBQUcsV0FDRixNQUFPLENBQ04sZ0JBQWlCLENBQ2hCLHNCQUF5QixTQUFTQyxFQUFNQyxHQUN2QyxPQUFPTixFQUFpQixHQUFHTyxRQUFXLEVBQUVGLEVBQU1DLElBRS9DLDJCQUE4QixTQUFTRCxFQUFNQyxHQUM1QyxPQUFPTixFQUFpQixHQUFHTyxRQUFXLEVBQUVGLEVBQU1DLFFBUW5ELFNBQVNFLEVBQW9CYixHQUc1QixHQUFHSyxFQUFpQkwsR0FDbkIsT0FBT0ssRUFBaUJMLEdBQVVZLFFBR25DLElBQUlFLEVBQVNULEVBQWlCTCxHQUFZLENBQ3pDZSxFQUFHZixFQUNIZ0IsR0FBRyxFQUNISixRQUFTLElBVVYsT0FOQVgsRUFBUUQsR0FBVWlCLEtBQUtILEVBQU9GLFFBQVNFLEVBQVFBLEVBQU9GLFFBQVNDLEdBRy9EQyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9GLFFBS2ZDLEVBQW9CSyxFQUFJLFNBQXVCQyxHQUM5QyxJQUFJQyxFQUFXLEdBdUNmLE9BdENBQSxFQUFTQyxLQUFLQyxRQUFRQyxV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LEtBQU9BLElBRzlDTCxFQUFHMEIsb0JBQW9CLFVBQVdqSCxHQUNsQ08sRUFBUW1GLEVBQUdDLFVBRVhKLEVBQUdSLE9BQ0hRLEVBQUdSLFFBRVBRLEVBQUd5QixZQUFZNUUsT0FBT2tELE9BQU8sQ0FBRU0sTUFBTW9ELEdBQU1MLE8sOEVDN1JuRCxVQUFlLElBQUlySSxTQUFvQixTQUFDQyxHQUN0QyxxQkFBcUNvSixHQUNuQ3BKLEVBQVEsRUFBUSxLQUNqQiIsImZpbGUiOiJjaGVja2Vycy53b3JrZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHRzZWxmW1wid2VicGFja0NodW5rXCJdID0gZnVuY3Rpb24gd2VicGFja0NodW5rQ2FsbGJhY2soY2h1bmtJZHMsIG1vcmVNb2R1bGVzKSB7XG4gXHRcdGZvcih2YXIgbW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0fVxuIFx0XHR3aGlsZShjaHVua0lkcy5sZW5ndGgpXG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRzLnBvcCgpXSA9IDE7XG4gXHR9O1xuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGNodW5rc1xuIFx0Ly8gXCIxXCIgbWVhbnMgXCJhbHJlYWR5IGxvYWRlZFwiXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQwOiAxXG4gXHR9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIHdhc20gbW9kdWxlc1xuIFx0dmFyIGluc3RhbGxlZFdhc21Nb2R1bGVzID0ge307XG5cbiBcdGZ1bmN0aW9uIHByb21pc2VSZXNvbHZlKCkgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7IH1cblxuIFx0dmFyIHdhc21JbXBvcnRPYmplY3RzID0ge1xuIFx0XHQ1OiBmdW5jdGlvbigpIHtcbiBcdFx0XHRyZXR1cm4ge1xuIFx0XHRcdFx0XCIuL2luZGV4X2JnLmpzXCI6IHtcbiBcdFx0XHRcdFx0XCJfX3diaW5kZ2VuX2pzb25fcGFyc2VcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1s0XS5leHBvcnRzW1wiY1wiXShwMGkzMixwMWkzMik7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFwiX193YmdfbG9nX2M3MDNhNGM3MWRhYzM3MWJcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1s0XS5leHBvcnRzW1wiYlwiXShwMGkzMixwMWkzMik7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHR9O1xuIFx0XHR9LFxuIFx0fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG4gXHQvLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4gXHQvLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3NcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZSA9IGZ1bmN0aW9uIHJlcXVpcmVFbnN1cmUoY2h1bmtJZCkge1xuIFx0XHR2YXIgcHJvbWlzZXMgPSBbXTtcbiBcdFx0cHJvbWlzZXMucHVzaChQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuIFx0XHRcdC8vIFwiMVwiIGlzIHRoZSBzaWduYWwgZm9yIFwiYWxyZWFkeSBsb2FkZWRcIlxuIFx0XHRcdGlmKCFpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdGltcG9ydFNjcmlwdHMoX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArICh7fVtjaHVua0lkXXx8Y2h1bmtJZCkgKyBcIi53b3JrZXIuanNcIik7XG4gXHRcdFx0fVxuIFx0XHR9KSk7XG5cbiBcdFx0Ly8gRmV0Y2ggKyBjb21waWxlIGNodW5rIGxvYWRpbmcgZm9yIHdlYmFzc2VtYmx5XG5cbiBcdFx0dmFyIHdhc21Nb2R1bGVzID0ge1wiMVwiOls1XX1bY2h1bmtJZF0gfHwgW107XG5cbiBcdFx0d2FzbU1vZHVsZXMuZm9yRWFjaChmdW5jdGlvbih3YXNtTW9kdWxlSWQpIHtcbiBcdFx0XHR2YXIgaW5zdGFsbGVkV2FzbU1vZHVsZURhdGEgPSBpbnN0YWxsZWRXYXNtTW9kdWxlc1t3YXNtTW9kdWxlSWRdO1xuXG4gXHRcdFx0Ly8gYSBQcm9taXNlIG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIiBvciBcImFscmVhZHkgbG9hZGVkXCIuXG4gXHRcdFx0aWYoaW5zdGFsbGVkV2FzbU1vZHVsZURhdGEpXG4gXHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZFdhc21Nb2R1bGVEYXRhKTtcbiBcdFx0XHRlbHNlIHtcbiBcdFx0XHRcdHZhciBpbXBvcnRPYmplY3QgPSB3YXNtSW1wb3J0T2JqZWN0c1t3YXNtTW9kdWxlSWRdKCk7XG4gXHRcdFx0XHR2YXIgcmVxID0gZmV0Y2goX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIHtcIjVcIjpcIjUyZmYyNGYzMzg5MzE1YzdmMTgyXCJ9W3dhc21Nb2R1bGVJZF0gKyBcIi5tb2R1bGUud2FzbVwiKTtcbiBcdFx0XHRcdHZhciBwcm9taXNlO1xuIFx0XHRcdFx0aWYoaW1wb3J0T2JqZWN0IGluc3RhbmNlb2YgUHJvbWlzZSAmJiB0eXBlb2YgV2ViQXNzZW1ibHkuY29tcGlsZVN0cmVhbWluZyA9PT0gJ2Z1bmN0aW9uJykge1xuIFx0XHRcdFx0XHRwcm9taXNlID0gUHJvbWlzZS5hbGwoW1dlYkFzc2VtYmx5LmNvbXBpbGVTdHJlYW1pbmcocmVxKSwgaW1wb3J0T2JqZWN0XSkudGhlbihmdW5jdGlvbihpdGVtcykge1xuIFx0XHRcdFx0XHRcdHJldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShpdGVtc1swXSwgaXRlbXNbMV0pO1xuIFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdH0gZWxzZSBpZih0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcgPT09ICdmdW5jdGlvbicpIHtcbiBcdFx0XHRcdFx0cHJvbWlzZSA9IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKHJlcSwgaW1wb3J0T2JqZWN0KTtcbiBcdFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRcdHZhciBieXRlc1Byb21pc2UgPSByZXEudGhlbihmdW5jdGlvbih4KSB7IHJldHVybiB4LmFycmF5QnVmZmVyKCk7IH0pO1xuIFx0XHRcdFx0XHRwcm9taXNlID0gYnl0ZXNQcm9taXNlLnRoZW4oZnVuY3Rpb24oYnl0ZXMpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYnl0ZXMsIGltcG9ydE9iamVjdCk7XG4gXHRcdFx0XHRcdH0pO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRXYXNtTW9kdWxlc1t3YXNtTW9kdWxlSWRdID0gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlcykge1xuIFx0XHRcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy53W3dhc21Nb2R1bGVJZF0gPSAocmVzLmluc3RhbmNlIHx8IHJlcykuZXhwb3J0cztcbiBcdFx0XHRcdH0pKTtcbiBcdFx0XHR9XG4gXHRcdH0pO1xuIFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuIFx0fTtcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBvYmplY3Qgd2l0aCBhbGwgV2ViQXNzZW1ibHkuaW5zdGFuY2UgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy53ID0ge307XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGNvbWxpbmtfMSA9IHJlcXVpcmUoXCJjb21saW5rXCIpO1xudmFyIHJ1c3RfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vcnVzdFwiKSk7XG5ydXN0XzEuZGVmYXVsdC50aGVuKGZ1bmN0aW9uIChydXN0KSB7XG4gICAgY29tbGlua18xLmV4cG9zZShydXN0KTtcbn0pO1xuIiwiLyoqXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgcHJveHlNYXJrZXIgPSBTeW1ib2woXCJDb21saW5rLnByb3h5XCIpO1xyXG5jb25zdCBjcmVhdGVFbmRwb2ludCA9IFN5bWJvbChcIkNvbWxpbmsuZW5kcG9pbnRcIik7XHJcbmNvbnN0IHJlbGVhc2VQcm94eSA9IFN5bWJvbChcIkNvbWxpbmsucmVsZWFzZVByb3h5XCIpO1xyXG5jb25zdCB0aHJvd01hcmtlciA9IFN5bWJvbChcIkNvbWxpbmsudGhyb3duXCIpO1xyXG5jb25zdCBpc09iamVjdCA9ICh2YWwpID0+ICh0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIHZhbCAhPT0gbnVsbCkgfHwgdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiO1xyXG4vKipcclxuICogSW50ZXJuYWwgdHJhbnNmZXIgaGFuZGxlIHRvIGhhbmRsZSBvYmplY3RzIG1hcmtlZCB0byBwcm94eS5cclxuICovXHJcbmNvbnN0IHByb3h5VHJhbnNmZXJIYW5kbGVyID0ge1xyXG4gICAgY2FuSGFuZGxlOiAodmFsKSA9PiBpc09iamVjdCh2YWwpICYmIHZhbFtwcm94eU1hcmtlcl0sXHJcbiAgICBzZXJpYWxpemUob2JqKSB7XHJcbiAgICAgICAgY29uc3QgeyBwb3J0MSwgcG9ydDIgfSA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xyXG4gICAgICAgIGV4cG9zZShvYmosIHBvcnQxKTtcclxuICAgICAgICByZXR1cm4gW3BvcnQyLCBbcG9ydDJdXTtcclxuICAgIH0sXHJcbiAgICBkZXNlcmlhbGl6ZShwb3J0KSB7XHJcbiAgICAgICAgcG9ydC5zdGFydCgpO1xyXG4gICAgICAgIHJldHVybiB3cmFwKHBvcnQpO1xyXG4gICAgfSxcclxufTtcclxuLyoqXHJcbiAqIEludGVybmFsIHRyYW5zZmVyIGhhbmRsZXIgdG8gaGFuZGxlIHRocm93biBleGNlcHRpb25zLlxyXG4gKi9cclxuY29uc3QgdGhyb3dUcmFuc2ZlckhhbmRsZXIgPSB7XHJcbiAgICBjYW5IYW5kbGU6ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpICYmIHRocm93TWFya2VyIGluIHZhbHVlLFxyXG4gICAgc2VyaWFsaXplKHsgdmFsdWUgfSkge1xyXG4gICAgICAgIGxldCBzZXJpYWxpemVkO1xyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQgPSB7XHJcbiAgICAgICAgICAgICAgICBpc0Vycm9yOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB2YWx1ZS5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHZhbHVlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhY2s6IHZhbHVlLnN0YWNrLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQgPSB7IGlzRXJyb3I6IGZhbHNlLCB2YWx1ZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3NlcmlhbGl6ZWQsIFtdXTtcclxuICAgIH0sXHJcbiAgICBkZXNlcmlhbGl6ZShzZXJpYWxpemVkKSB7XHJcbiAgICAgICAgaWYgKHNlcmlhbGl6ZWQuaXNFcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBPYmplY3QuYXNzaWduKG5ldyBFcnJvcihzZXJpYWxpemVkLnZhbHVlLm1lc3NhZ2UpLCBzZXJpYWxpemVkLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgc2VyaWFsaXplZC52YWx1ZTtcclxuICAgIH0sXHJcbn07XHJcbi8qKlxyXG4gKiBBbGxvd3MgY3VzdG9taXppbmcgdGhlIHNlcmlhbGl6YXRpb24gb2YgY2VydGFpbiB2YWx1ZXMuXHJcbiAqL1xyXG5jb25zdCB0cmFuc2ZlckhhbmRsZXJzID0gbmV3IE1hcChbXHJcbiAgICBbXCJwcm94eVwiLCBwcm94eVRyYW5zZmVySGFuZGxlcl0sXHJcbiAgICBbXCJ0aHJvd1wiLCB0aHJvd1RyYW5zZmVySGFuZGxlcl0sXHJcbl0pO1xyXG5mdW5jdGlvbiBleHBvc2Uob2JqLCBlcCA9IHNlbGYpIHtcclxuICAgIGVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIGNhbGxiYWNrKGV2KSB7XHJcbiAgICAgICAgaWYgKCFldiB8fCAhZXYuZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgaWQsIHR5cGUsIHBhdGggfSA9IE9iamVjdC5hc3NpZ24oeyBwYXRoOiBbXSB9LCBldi5kYXRhKTtcclxuICAgICAgICBjb25zdCBhcmd1bWVudExpc3QgPSAoZXYuZGF0YS5hcmd1bWVudExpc3QgfHwgW10pLm1hcChmcm9tV2lyZVZhbHVlKTtcclxuICAgICAgICBsZXQgcmV0dXJuVmFsdWU7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gcGF0aC5zbGljZSgwLCAtMSkucmVkdWNlKChvYmosIHByb3ApID0+IG9ialtwcm9wXSwgb2JqKTtcclxuICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBwYXRoLnJlZHVjZSgob2JqLCBwcm9wKSA9PiBvYmpbcHJvcF0sIG9iaik7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwIC8qIEdFVCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gcmF3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxIC8qIFNFVCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFtwYXRoLnNsaWNlKC0xKVswXV0gPSBmcm9tV2lyZVZhbHVlKGV2LmRhdGEudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyIC8qIEFQUExZICovOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSByYXdWYWx1ZS5hcHBseShwYXJlbnQsIGFyZ3VtZW50TGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzIC8qIENPTlNUUlVDVCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbmV3IHJhd1ZhbHVlKC4uLmFyZ3VtZW50TGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gcHJveHkodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNCAvKiBFTkRQT0lOVCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcG9ydDEsIHBvcnQyIH0gPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3NlKG9iaiwgcG9ydDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRyYW5zZmVyKHBvcnQxLCBbcG9ydDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDUgLyogUkVMRUFTRSAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB7IHZhbHVlLCBbdGhyb3dNYXJrZXJdOiAwIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZShyZXR1cm5WYWx1ZSlcclxuICAgICAgICAgICAgLmNhdGNoKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZSwgW3Rocm93TWFya2VyXTogMCB9O1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChyZXR1cm5WYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBbd2lyZVZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJldHVyblZhbHVlKTtcclxuICAgICAgICAgICAgZXAucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB3aXJlVmFsdWUpLCB7IGlkIH0pLCB0cmFuc2ZlcmFibGVzKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09IDUgLyogUkVMRUFTRSAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gZGV0YWNoIGFuZCBkZWFjdGl2ZSBhZnRlciBzZW5kaW5nIHJlbGVhc2UgcmVzcG9uc2UgYWJvdmUuXHJcbiAgICAgICAgICAgICAgICBlcC5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICBjbG9zZUVuZFBvaW50KGVwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoZXAuc3RhcnQpIHtcclxuICAgICAgICBlcC5zdGFydCgpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzTWVzc2FnZVBvcnQoZW5kcG9pbnQpIHtcclxuICAgIHJldHVybiBlbmRwb2ludC5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIk1lc3NhZ2VQb3J0XCI7XHJcbn1cclxuZnVuY3Rpb24gY2xvc2VFbmRQb2ludChlbmRwb2ludCkge1xyXG4gICAgaWYgKGlzTWVzc2FnZVBvcnQoZW5kcG9pbnQpKVxyXG4gICAgICAgIGVuZHBvaW50LmNsb3NlKCk7XHJcbn1cclxuZnVuY3Rpb24gd3JhcChlcCwgdGFyZ2V0KSB7XHJcbiAgICByZXR1cm4gY3JlYXRlUHJveHkoZXAsIFtdLCB0YXJnZXQpO1xyXG59XHJcbmZ1bmN0aW9uIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUmVsZWFzZWQpIHtcclxuICAgIGlmIChpc1JlbGVhc2VkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJveHkgaGFzIGJlZW4gcmVsZWFzZWQgYW5kIGlzIG5vdCB1c2VhYmxlXCIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVByb3h5KGVwLCBwYXRoID0gW10sIHRhcmdldCA9IGZ1bmN0aW9uICgpIHsgfSkge1xyXG4gICAgbGV0IGlzUHJveHlSZWxlYXNlZCA9IGZhbHNlO1xyXG4gICAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LCB7XHJcbiAgICAgICAgZ2V0KF90YXJnZXQsIHByb3ApIHtcclxuICAgICAgICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTtcclxuICAgICAgICAgICAgaWYgKHByb3AgPT09IHJlbGVhc2VQcm94eSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiA1IC8qIFJFTEVBU0UgKi8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUVuZFBvaW50KGVwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQcm94eVJlbGVhc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByb3AgPT09IFwidGhlblwiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0aGVuOiAoKSA9PiBwcm94eSB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIEdFVCAqLyxcclxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gci50aGVuLmJpbmQocik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBbLi4ucGF0aCwgcHJvcF0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0KF90YXJnZXQsIHByb3AsIHJhd1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7XHJcbiAgICAgICAgICAgIC8vIEZJWE1FOiBFUzYgUHJveHkgSGFuZGxlciBgc2V0YCBtZXRob2RzIGFyZSBzdXBwb3NlZCB0byByZXR1cm4gYVxyXG4gICAgICAgICAgICAvLyBib29sZWFuLiBUbyBzaG93IGdvb2Qgd2lsbCwgd2UgcmV0dXJuIHRydWUgYXN5bmNocm9ub3VzbHkgwq9cXF8o44OEKV8vwq9cclxuICAgICAgICAgICAgY29uc3QgW3ZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJhd1ZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogU0VUICovLFxyXG4gICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhdGgsIHByb3BdLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYXBwbHkoX3RhcmdldCwgX3RoaXNBcmcsIHJhd0FyZ3VtZW50TGlzdCkge1xyXG4gICAgICAgICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpO1xyXG4gICAgICAgICAgICBjb25zdCBsYXN0ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICBpZiAobGFzdCA9PT0gY3JlYXRlRW5kcG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogNCAvKiBFTkRQT0lOVCAqLyxcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gV2UganVzdCBwcmV0ZW5kIHRoYXQgYGJpbmQoKWAgZGlkbuKAmXQgaGFwcGVuLlxyXG4gICAgICAgICAgICBpZiAobGFzdCA9PT0gXCJiaW5kXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQcm94eShlcCwgcGF0aC5zbGljZSgwLCAtMSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IFthcmd1bWVudExpc3QsIHRyYW5zZmVyYWJsZXNdID0gcHJvY2Vzc0FyZ3VtZW50cyhyYXdBcmd1bWVudExpc3QpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogMiAvKiBBUFBMWSAqLyxcclxuICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgYXJndW1lbnRMaXN0LFxyXG4gICAgICAgICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29uc3RydWN0KF90YXJnZXQsIHJhd0FyZ3VtZW50TGlzdCkge1xyXG4gICAgICAgICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpO1xyXG4gICAgICAgICAgICBjb25zdCBbYXJndW1lbnRMaXN0LCB0cmFuc2ZlcmFibGVzXSA9IHByb2Nlc3NBcmd1bWVudHMocmF3QXJndW1lbnRMaXN0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IDMgLyogQ09OU1RSVUNUICovLFxyXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICBhcmd1bWVudExpc3QsXHJcbiAgICAgICAgICAgIH0sIHRyYW5zZmVyYWJsZXMpLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHByb3h5O1xyXG59XHJcbmZ1bmN0aW9uIG15RmxhdChhcnIpIHtcclxuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcnIpO1xyXG59XHJcbmZ1bmN0aW9uIHByb2Nlc3NBcmd1bWVudHMoYXJndW1lbnRMaXN0KSB7XHJcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBhcmd1bWVudExpc3QubWFwKHRvV2lyZVZhbHVlKTtcclxuICAgIHJldHVybiBbcHJvY2Vzc2VkLm1hcCgodikgPT4gdlswXSksIG15RmxhdChwcm9jZXNzZWQubWFwKCh2KSA9PiB2WzFdKSldO1xyXG59XHJcbmNvbnN0IHRyYW5zZmVyQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG5mdW5jdGlvbiB0cmFuc2ZlcihvYmosIHRyYW5zZmVycykge1xyXG4gICAgdHJhbnNmZXJDYWNoZS5zZXQob2JqLCB0cmFuc2ZlcnMpO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG5mdW5jdGlvbiBwcm94eShvYmopIHtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iaiwgeyBbcHJveHlNYXJrZXJdOiB0cnVlIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHdpbmRvd0VuZHBvaW50KHcsIGNvbnRleHQgPSBzZWxmLCB0YXJnZXRPcmlnaW4gPSBcIipcIikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBwb3N0TWVzc2FnZTogKG1zZywgdHJhbnNmZXJhYmxlcykgPT4gdy5wb3N0TWVzc2FnZShtc2csIHRhcmdldE9yaWdpbiwgdHJhbnNmZXJhYmxlcyksXHJcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogY29udGV4dC5hZGRFdmVudExpc3RlbmVyLmJpbmQoY29udGV4dCksXHJcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogY29udGV4dC5yZW1vdmVFdmVudExpc3RlbmVyLmJpbmQoY29udGV4dCksXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHRvV2lyZVZhbHVlKHZhbHVlKSB7XHJcbiAgICBmb3IgKGNvbnN0IFtuYW1lLCBoYW5kbGVyXSBvZiB0cmFuc2ZlckhhbmRsZXJzKSB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIuY2FuSGFuZGxlKHZhbHVlKSkge1xyXG4gICAgICAgICAgICBjb25zdCBbc2VyaWFsaXplZFZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IGhhbmRsZXIuc2VyaWFsaXplKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAzIC8qIEhBTkRMRVIgKi8sXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VyaWFsaXplZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRyYW5zZmVyYWJsZXMsXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHR5cGU6IDAgLyogUkFXICovLFxyXG4gICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRyYW5zZmVyQ2FjaGUuZ2V0KHZhbHVlKSB8fCBbXSxcclxuICAgIF07XHJcbn1cclxuZnVuY3Rpb24gZnJvbVdpcmVWYWx1ZSh2YWx1ZSkge1xyXG4gICAgc3dpdGNoICh2YWx1ZS50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAzIC8qIEhBTkRMRVIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlckhhbmRsZXJzLmdldCh2YWx1ZS5uYW1lKS5kZXNlcmlhbGl6ZSh2YWx1ZS52YWx1ZSk7XHJcbiAgICAgICAgY2FzZSAwIC8qIFJBVyAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnZhbHVlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIG1zZywgdHJhbnNmZXJzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICBjb25zdCBpZCA9IGdlbmVyYXRlVVVJRCgpO1xyXG4gICAgICAgIGVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIGwoZXYpIHtcclxuICAgICAgICAgICAgaWYgKCFldi5kYXRhIHx8ICFldi5kYXRhLmlkIHx8IGV2LmRhdGEuaWQgIT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbCk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoZXYuZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGVwLnN0YXJ0KSB7XHJcbiAgICAgICAgICAgIGVwLnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVwLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oeyBpZCB9LCBtc2cpLCB0cmFuc2ZlcnMpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKCkge1xyXG4gICAgcmV0dXJuIG5ldyBBcnJheSg0KVxyXG4gICAgICAgIC5maWxsKDApXHJcbiAgICAgICAgLm1hcCgoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikudG9TdHJpbmcoMTYpKVxyXG4gICAgICAgIC5qb2luKFwiLVwiKTtcclxufVxuXG5leHBvcnQgeyBjcmVhdGVFbmRwb2ludCwgZXhwb3NlLCBwcm94eSwgcHJveHlNYXJrZXIsIHJlbGVhc2VQcm94eSwgdHJhbnNmZXIsIHRyYW5zZmVySGFuZGxlcnMsIHdpbmRvd0VuZHBvaW50LCB3cmFwIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21saW5rLm1qcy5tYXBcbiIsImltcG9ydCBwa2cgPSByZXF1aXJlKFwiLi4vcGtnL2luZGV4XCIpO1xuXG5leHBvcnQgZGVmYXVsdCBuZXcgUHJvbWlzZTx0eXBlb2YgcGtnPigocmVzb2x2ZSkgPT4ge1xuICByZXF1aXJlLmVuc3VyZShbXCIuLi9wa2cvaW5kZXguanNcIl0sIChyZXF1aXJlKSA9PiB7XG4gICAgcmVzb2x2ZShyZXF1aXJlKFwiLi4vcGtnL2luZGV4LmpzXCIpKTtcbiAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=